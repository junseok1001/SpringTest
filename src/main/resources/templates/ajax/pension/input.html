<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>통나무 펜션 예약하기</title>

    <link rel="stylesheet" href="https://code.jquery.com/ui/1.14.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <link rel="stylesheet" href="/pension/style.css">
</head>
<body>
<div id="wrap">
    <header class="d-flex justify-content-center align-items-center">
        <div class="display-4">통나무 펜션</div>
    </header>
    <nav class="main-menu">
        <ul class="nav nav-fill font-weight-bold">
            <li class="nav-item"><a href="/ajax/pension/search" class="nav-link text-white">펜션소개</a></li>
            <li class="nav-item"><a href="/ajax/pension/list" class="nav-link text-white">객실보기</a></li>
            <li class="nav-item"><a href="/ajax/pension/input" class="nav-link text-white">예약하기</a></li>
            <li class="nav-item"><a href="#" class="nav-link text-white">커뮤니티</a></li>
        </ul>
    </nav>
    <section class="contents">
        <div class="input">
            <div class="d-flex justify-content-center align-items-center">
                <h2>예약하기</h2>
            </div>
            <label>이름</label>
            <input id="nameInput" type="text" class="form-control mb-2">

            <label>예약날짜</label>
            <input  type="text" id="dateInput" class="form-control mb-2">

            <label>숙박일수</label>
            <input id="dayInput" type="text" class="form-control mb-2">

            <label>숙박인원</label>
            <input id="headcountInput" type="text" class="form-control mb-2">

            <label>전화번호</label>
            <input id="phoneNumberInput" type="text" class="form-control mb-2">

            <button id="inputBtn" type="button" class="btn btn-warning w-100">예약하기</button>
        </div>
    </section>
    <footer class="mt-3">
        <div class="small text-secondary">
            제주특별자치도 제주시 애월읍  <br>
            사업자등록번호: 111-22-255222 / 농어촌민박사업자지정 / 대표:김통목 <br>
            Copyright 2025 tongnamu All right reserved
        </div>
    </footer>
</div>

<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/ui/1.14.1/jquery-ui.js"></script>
<script>
    $("#dateInput").datepicker({
        dateFormat:"yy년 mm월 dd일",
        minDate: 0
    });

    $("#inputBtn").on("click", function(){
        let name = $("#nameInput").val();
        let date = $("#dateInput").val();
        let day = $("#dayInput").val();
        let headcount = $("#headcountInput").val();
        let phoneNumber = $("#phoneNumberInput").val();


        if(name == ""){
            alert("이름을 입력하세요");
            return;
        }

        if(date == ""){
            alert("날짜를 입력하세요");
            return;
        }

        if(day == ""){
            alert("숙박일수를 입력하세요");
            return;
        }

        // 숫자가 아닌 경우
        // Not a Number의 약자 NaN
        if(isNaN(day)){
            alert("숙박일수는 숫자만 입력가능합니다.");
            return;
        }

        if(headcount == ""){
            alert("숙박인원을 입력하세요");
            return;
        }

        // 숫자가 아닌경우
        if(isNaN(headcount)){
            alert("숙박인원는 숫자만 입력가능합니다.");
            return;
        }

        if(phoneNumber == ""){
            alert("전화번호를 입력하세요");
            return;
        }

        if(!phoneNumber.startsWith("010")){
            alert("010으로 시작해야합니다.");
            return;
        }

        $.ajax({
            type:"post"
            , url:"/ajax/pension/input"
            , data:{"name":name, "date":date, "day":day, "headcount":headcount, "phoneNumber":phoneNumber}
            , success:function(response) {
                if(response === 0){
                    alert("입력 실패!");
                }else{
                    location.href="/ajax/pension/list";
                }
            }
            , error : function(){
                alert("추가 에러!");
            }
        });

    });


</script>
</body>
</html>